!function($){function _validate_exact_length(value,exact){return value.length==exact?!0:!1}function _validate_min_length(value,min){return value.length>=min?!0:!1}function _validate_max_length(value,max){return value.length<=max?!0:!1}function _validate_confirm_email(value,selector){return value==jQuery(selector).val()?!0:!1}function _validate_cc(value){return _validate_numeric(value)&&_validate_exact_length(value,16)}function _validate_numeric(value){var re=/^[0-9]+$/;return re.test(value)}function _validate_email(value){var re=/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return re.test(value)}function _validate_phone(value){var re=/^((([0-9]{1})*[- .(]*([0-9]{3})[- .)]*[0-9]{3}[- .]*[0-9]{4})+)*$/;return re.test(value)}function _validate_required(field){return""==field.val()?!1:!0}function _validate_checked(field){return field.is(":checked")}var lastValidationErrors={},hasErrors=!1;$.fn.validate=function(options){return this.each(function(){var $form=$(this);$form.on("submit",function(evt){lastValidationErrors=new Object,$form.find(".validate").each(function(){var errors=$.fn.validate.getErrors($(this)),elemName=$(this).attr("name");errors.length>0&&(lastValidationErrors[elemName]=errors)}),hasErrors=!1;for(var prop in lastValidationErrors){hasErrors=!0;break}hasErrors?options.onSubmitErrorCallback.call(this,lastValidationErrors):options.onSubmitSuccessCallback.call(this),evt.preventDefault()})})},$.fn.testForm=function(options){return this.each(function(){var $form=$(this);lastValidationErrors=new Object,$form.find(".validate").each(function(){var errors=$.fn.validate.getErrors($(this)),elemName=$(this).attr("name");errors.length>0&&(lastValidationErrors[elemName]=errors)}),hasErrors=!1;for(var prop in lastValidationErrors){hasErrors=!0;break}hasErrors?options.onSubmitErrorCallback.call(this,lastValidationErrors):options.onSubmitSuccessCallback.call(this)})},$.fn.validate.getErrors=function($element){var errors=new Array;try{var value=$element.val(),rules=$element.attr("data-rules").split(",");$.each(rules,function(index,rule){var error;switch(ruleName=rule.split(":"),ruleName=ruleName[0]){case"checked":_validate_checked($element)||(error="checkbox");break;case"required":_validate_required($element)||(error="required");break;case"email":_validate_email(value)||(error="email");break;case"numeric":_validate_numeric(value)||(error="numeric");break;case"cc":_validate_cc(value.replace(/\s/g,""))||(error="cc");break;case"phone":_validate_phone(value.replace(/\s/g,""))||(error="phone");break;case"confirmEmail":try{var selector=rule.split(":")[1];_validate_confirm_email(value,selector)||(error="confirmEmail")}catch(error){console.debug('Validate: malformed rule "confirmEmail" in field '+$element.attr("name"))}break;case"min_length":try{var min=rule.split(":")[1];_validate_min_length(value,min)||(error="min_length")}catch(error){console.debug('Validate: malformed rule "min_length" in field '+$element.attr("name"))}break;case"max_length":try{var max=rule.split(":")[1];_validate_max_length(value,max)||(error="max_length")}catch(error){console.debug('Validate: malformed rule "max_length" in field '+$element.attr("name"))}break;case"exact_length":try{{rule.split(":")[1]}_validate_exact_length(value,max)||(error="exact_length")}catch(error){console.log('Validate: malformed rule "exact_length" in field '+$element.attr("name"))}}void 0!=error&&errors.push(error)})}catch(err){console.log("Validate: "+err+" occurred in "+$element.attr("name"))}return errors}}(jQuery);